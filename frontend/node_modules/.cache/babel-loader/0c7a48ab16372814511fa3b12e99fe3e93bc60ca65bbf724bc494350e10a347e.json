{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\51D1B3\\\\MesProjets\\\\Pharmacie\\\\frontend\\\\src\\\\components\\\\ClientChatWidget.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { MessageCircle, Send, X, Minimize2, Phone, User } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext.jsx';\nimport { useChat } from '../contexts/ChatContext.jsx';\nimport MessageContextMenu from './MessageContextMenu.jsx';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ClientChatWidget = ({\n  predefinedMessage,\n  isOpen: isOpenProp,\n  onClose: onCloseProp\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    conversations,\n    sendMessage,\n    getConversation,\n    editMessage,\n    deleteMessage,\n    unreadCount\n  } = useChat();\n  const [isMinimized, setIsMinimized] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('connecting');\n  const [contextMenu, setContextMenu] = useState(null);\n  const messagesEndRef = useRef(null);\n  const [isOpen, setIsOpen] = useState(isOpenProp || false);\n\n  // Sync with external prop to open the widget\n  useEffect(() => {\n    if (isOpenProp) {\n      setIsOpen(true);\n    }\n  }, [isOpenProp]);\n\n  // Using ChatContext for data management\n\n  useEffect(() => {\n    if (user) {\n      setConnectionStatus('connected');\n      // Get the client's conversation with admin if it exists\n      const clientConversation = conversations.find(conv => conv.clientId === user._id);\n      if (clientConversation) {\n        setMessages(clientConversation.messages || []);\n      } else {\n        setMessages([]);\n      }\n    }\n  }, [user, conversations]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Handle predefined message\n  useEffect(() => {\n    if (predefinedMessage && predefinedMessage.trim()) {\n      setNewMessage(predefinedMessage);\n      setIsMinimized(false);\n      // The parent component is responsible for setting isOpen to true, which will trigger the effect above.\n    }\n  }, [predefinedMessage]);\n\n  // Simulate real-time messaging\n  useEffect(() => {\n    if (isOpen) {\n      const interval = setInterval(() => {\n        // Simulate admin typing indicator\n        if (Math.random() > 0.95) {\n          setIsTyping(true);\n          setTimeout(() => {\n            setIsTyping(false);\n            // Simulate admin response\n            if (Math.random() > 0.7) {\n              const responses = ['Je vérifie cela pour vous...', 'Oui, nous avons ce produit en stock.', 'Pouvez-vous me donner plus de détails?', 'Je vous recommande de consulter votre médecin.', 'Nous sommes ouverts de 8h à 20h du lundi au samedi.'];\n              const randomResponse = responses[Math.floor(Math.random() * responses.length)];\n              setMessages(prev => [...prev, {\n                id: Date.now(),\n                senderId: 'admin',\n                senderName: 'PharmaMOS',\n                text: randomResponse,\n                timestamp: new Date(),\n                isAdmin: true\n              }]);\n            }\n          }, 2000);\n        }\n      }, 10000);\n      return () => clearInterval(interval);\n    }\n  }, [isOpen]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const handleSendMessage = e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !user) return;\n\n    // Use user ID as conversation ID to create unique conversation per client\n    const conversationId = user._id;\n    const message = sendMessage(conversationId, newMessage, 'admin');\n    setMessages(prev => [...prev, message]);\n    setNewMessage('');\n  };\n  const handleMessageClick = (message, event) => {\n    // Only allow editing/deleting own messages\n    if (message.senderId === user._id) {\n      setContextMenu({\n        message,\n        position: {\n          x: event.clientX,\n          y: event.clientY\n        }\n      });\n    }\n  };\n  const handleEditMessage = (messageId, newText) => {\n    const conversationId = user._id;\n    editMessage(conversationId, messageId, newText);\n    setMessages(prev => prev.map(msg => msg.id === messageId ? {\n      ...msg,\n      text: newText,\n      isEdited: true,\n      editedAt: new Date()\n    } : msg));\n  };\n  const handleDeleteMessage = messageId => {\n    const conversationId = user._id;\n    deleteMessage(conversationId, messageId);\n    setMessages(prev => prev.filter(msg => msg.id !== messageId));\n  };\n  const handleClose = () => {\n    setIsOpen(false);\n    if (onCloseProp) {\n      onCloseProp();\n    }\n  };\n  const formatTime = timestamp => {\n    return timestamp.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  if (!user) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isOpen && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsOpen(true),\n      className: \"fixed bottom-4 right-4 bg-green-600 hover:bg-green-700 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110 z-50 relative\",\n      style: {\n        position: 'fixed'\n      },\n      children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n        className: \"h-6 w-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold shadow-lg\",\n        children: unreadCount > 9 ? '9+' : unreadCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `fixed bottom-20 right-4 bg-white dark:bg-gray-900 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50 transition-all duration-300 ${isMinimized ? 'w-80 h-14' : 'w-96 h-[500px]'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-4 bg-green-600 text-white rounded-t-xl relative dark:bg-gray-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center relative dark:bg-primary-700\",\n            children: [/*#__PURE__*/_jsxDEV(User, {\n              className: \"h-4 w-4 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center font-bold text-[10px]\",\n              children: unreadCount > 9 ? '9+' : unreadCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-sm\",\n              children: \"PharmaMOS en ligne\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-2 h-2 rounded-full ${connectionStatus === 'connected' ? 'bg-green-300' : 'bg-yellow-300'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs\",\n                children: connectionStatus === 'connected' ? 'En ligne' : 'Connexion...'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsMinimized(!isMinimized),\n            className: \"p-1 hover:bg-green-700 rounded\",\n            children: /*#__PURE__*/_jsxDEV(Minimize2, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleClose,\n            className: \"p-1 hover:bg-green-700 rounded\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this), !isMinimized && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto p-4 h-80 bg-gray-50 dark:bg-gray-900\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex ${message.isAdmin ? 'justify-start' : 'justify-end'}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: e => handleMessageClick(message, e),\n                className: `max-w-xs px-4 py-2 rounded-lg cursor-pointer hover:opacity-80 ${message.isAdmin ? 'bg-white text-gray-800 rounded-bl-none shadow-sm dark:bg-gray-800 dark:text-gray-100' : 'bg-green-500 text-white rounded-br-none dark:bg-primary-600'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm\",\n                  children: message.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between mt-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: `text-xs ${message.isAdmin ? 'text-gray-500 dark:text-gray-300' : 'text-green-100'}`,\n                    children: formatTime(message.timestamp)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 27\n                  }, this), message.isEdited && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `text-xs italic ${message.isAdmin ? 'text-gray-400 dark:text-gray-400' : 'text-green-200'}`,\n                    children: \"modifi\\xE9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 23\n              }, this)\n            }, message.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 21\n            }, this)), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-start\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white text-gray-800 px-4 py-2 rounded-lg rounded-bl-none shadow-sm\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                    style: {\n                      animationDelay: '0.1s'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                    style: {\n                      animationDelay: '0.2s'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900\",\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSendMessage,\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: newMessage,\n              onChange: e => setNewMessage(e.target.value),\n              placeholder: \"Tapez votre message...\",\n              className: \"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: !newMessage.trim(),\n              className: \"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: /*#__PURE__*/_jsxDEV(Send, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-2 mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setNewMessage('Bonjour, j\\'ai une question sur un médicament'),\n              className: \"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200\",\n              children: \"Question m\\xE9dicament\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setNewMessage('Quels sont vos horaires d\\'ouverture?'),\n              className: \"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200\",\n              children: \"Horaires\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setNewMessage('Avez-vous ce produit en stock?'),\n              className: \"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200\",\n              children: \"Stock produit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this), contextMenu && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 z-40\",\n        onClick: () => setContextMenu(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MessageContextMenu, {\n        message: contextMenu.message,\n        position: contextMenu.position,\n        onEdit: handleEditMessage,\n        onDelete: handleDeleteMessage,\n        onClose: () => setContextMenu(null),\n        canEdit: contextMenu.message.senderId === user._id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n_s(ClientChatWidget, \"FYbWoAbObI0k+B5xpwAeWhV+d30=\", false, function () {\n  return [useAuth, useChat];\n});\n_c = ClientChatWidget;\nexport default ClientChatWidget;\nvar _c;\n$RefreshReg$(_c, \"ClientChatWidget\");","map":{"version":3,"names":["React","useState","useEffect","useRef","MessageCircle","Send","X","Minimize2","Phone","User","useAuth","useChat","MessageContextMenu","jsxDEV","_jsxDEV","Fragment","_Fragment","ClientChatWidget","predefinedMessage","isOpen","isOpenProp","onClose","onCloseProp","_s","user","conversations","sendMessage","getConversation","editMessage","deleteMessage","unreadCount","isMinimized","setIsMinimized","messages","setMessages","newMessage","setNewMessage","isTyping","setIsTyping","connectionStatus","setConnectionStatus","contextMenu","setContextMenu","messagesEndRef","setIsOpen","clientConversation","find","conv","clientId","_id","scrollToBottom","trim","interval","setInterval","Math","random","setTimeout","responses","randomResponse","floor","length","prev","id","Date","now","senderId","senderName","text","timestamp","isAdmin","clearInterval","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","e","preventDefault","conversationId","message","handleMessageClick","event","position","x","clientX","y","clientY","handleEditMessage","messageId","newText","map","msg","isEdited","editedAt","handleDeleteMessage","filter","handleClose","formatTime","toLocaleTimeString","hour","minute","children","onClick","className","style","fileName","_jsxFileName","lineNumber","columnNumber","animationDelay","ref","onSubmit","type","value","onChange","target","placeholder","disabled","onEdit","onDelete","canEdit","_c","$RefreshReg$"],"sources":["C:/Users/51D1B3/MesProjets/Pharmacie/frontend/src/components/ClientChatWidget.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { MessageCircle, Send, X, Minimize2, Phone, User } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext.jsx';\nimport { useChat } from '../contexts/ChatContext.jsx';\nimport MessageContextMenu from './MessageContextMenu.jsx';\n\nconst ClientChatWidget = ({ predefinedMessage, isOpen: isOpenProp, onClose: onCloseProp }) => {\n  const { user } = useAuth();\n  const { conversations, sendMessage, getConversation, editMessage, deleteMessage, unreadCount } = useChat();\n  const [isMinimized, setIsMinimized] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('connecting');\n  const [contextMenu, setContextMenu] = useState(null);\n  const messagesEndRef = useRef(null);\n  const [isOpen, setIsOpen] = useState(isOpenProp || false);\n\n  // Sync with external prop to open the widget\n  useEffect(() => {\n    if (isOpenProp) {\n      setIsOpen(true);\n    }\n  }, [isOpenProp]);\n\n  // Using ChatContext for data management\n\n  useEffect(() => {\n    if (user) {\n      setConnectionStatus('connected');\n      // Get the client's conversation with admin if it exists\n      const clientConversation = conversations.find(conv => conv.clientId === user._id);\n      if (clientConversation) {\n        setMessages(clientConversation.messages || []);\n      } else {\n        setMessages([]);\n      }\n    }\n  }, [user, conversations]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Handle predefined message\n  useEffect(() => {\n    if (predefinedMessage && predefinedMessage.trim()) {\n      setNewMessage(predefinedMessage);\n      setIsMinimized(false);\n      // The parent component is responsible for setting isOpen to true, which will trigger the effect above.\n    }\n  }, [predefinedMessage]);\n\n  // Simulate real-time messaging\n  useEffect(() => {\n    if (isOpen) {\n      const interval = setInterval(() => {\n        // Simulate admin typing indicator\n        if (Math.random() > 0.95) {\n          setIsTyping(true);\n          setTimeout(() => {\n            setIsTyping(false);\n            // Simulate admin response\n            if (Math.random() > 0.7) {\n              const responses = [\n                'Je vérifie cela pour vous...',\n                'Oui, nous avons ce produit en stock.',\n                'Pouvez-vous me donner plus de détails?',\n                'Je vous recommande de consulter votre médecin.',\n                'Nous sommes ouverts de 8h à 20h du lundi au samedi.'\n              ];\n              const randomResponse = responses[Math.floor(Math.random() * responses.length)];\n              \n              setMessages(prev => [...prev, {\n                id: Date.now(),\n                senderId: 'admin',\n                senderName: 'PharmaMOS',\n                text: randomResponse,\n                timestamp: new Date(),\n                isAdmin: true\n              }]);\n            }\n          }, 2000);\n        }\n      }, 10000);\n\n      return () => clearInterval(interval);\n    }\n  }, [isOpen]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSendMessage = (e) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !user) return;\n\n    // Use user ID as conversation ID to create unique conversation per client\n    const conversationId = user._id;\n    const message = sendMessage(conversationId, newMessage, 'admin');\n    setMessages(prev => [...prev, message]);\n    setNewMessage('');\n  };\n\n  const handleMessageClick = (message, event) => {\n    // Only allow editing/deleting own messages\n    if (message.senderId === user._id) {\n      setContextMenu({\n        message,\n        position: { x: event.clientX, y: event.clientY }\n      });\n    }\n  };\n\n  const handleEditMessage = (messageId, newText) => {\n    const conversationId = user._id;\n    editMessage(conversationId, messageId, newText);\n    setMessages(prev => \n      prev.map(msg => \n        msg.id === messageId \n          ? { ...msg, text: newText, isEdited: true, editedAt: new Date() }\n          : msg\n      )\n    );\n  };\n\n  const handleDeleteMessage = (messageId) => {\n    const conversationId = user._id;\n    deleteMessage(conversationId, messageId);\n    setMessages(prev => prev.filter(msg => msg.id !== messageId));\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n    if (onCloseProp) {\n      onCloseProp();\n    }\n  };\n\n  const formatTime = (timestamp) => {\n    return timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  if (!user) return null;\n\n  return (\n    <>\n      {/* Chat Button */}\n      {!isOpen && (\n        <button\n          onClick={() => setIsOpen(true)}\n          className=\"fixed bottom-4 right-4 bg-green-600 hover:bg-green-700 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110 z-50 relative\"\n          style={{ position: 'fixed' }}\n        >\n          <MessageCircle className=\"h-6 w-6\" />\n          {unreadCount > 0 && (\n            <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold shadow-lg\">\n              {unreadCount > 9 ? '9+' : unreadCount}\n            </span>\n          )}\n        </button>\n      )}\n\n      {/* Chat Window */}\n      {isOpen && (\n        <div className={`fixed bottom-20 right-4 bg-white dark:bg-gray-900 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50 transition-all duration-300 ${\n          isMinimized ? 'w-80 h-14' : 'w-96 h-[500px]'\n        }`}>\n          \n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 bg-green-600 text-white rounded-t-xl relative dark:bg-gray-800\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center relative dark:bg-primary-700\">\n                <User className=\"h-4 w-4 text-white\" />\n                {unreadCount > 0 && (\n                  <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center font-bold text-[10px]\">\n                    {unreadCount > 9 ? '9+' : unreadCount}\n                  </span>\n                )}\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-sm\">PharmaMOS en ligne</h3>\n                <div className=\"flex items-center space-x-1\">\n                  <div className={`w-2 h-2 rounded-full ${\n                    connectionStatus === 'connected' ? 'bg-green-300' : 'bg-yellow-300'\n                  }`}></div>\n                  <span className=\"text-xs\">\n                    {connectionStatus === 'connected' ? 'En ligne' : 'Connexion...'}\n                  </span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => setIsMinimized(!isMinimized)}\n                className=\"p-1 hover:bg-green-700 rounded\"\n              >\n                <Minimize2 className=\"h-4 w-4\" />\n              </button>\n              <button\n                onClick={handleClose}\n                className=\"p-1 hover:bg-green-700 rounded\"\n              >\n                <X className=\"h-4 w-4\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Chat Content */}\n          {!isMinimized && (\n            <>\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-4 h-80 bg-gray-50 dark:bg-gray-900\">\n                <div className=\"space-y-4\">\n                  {messages.map((message) => (\n                    <div\n                      key={message.id}\n                      className={`flex ${message.isAdmin ? 'justify-start' : 'justify-end'}`}\n                    >\n                      <div \n                        onClick={(e) => handleMessageClick(message, e)}\n                        className={`max-w-xs px-4 py-2 rounded-lg cursor-pointer hover:opacity-80 ${\n                        message.isAdmin\n                          ? 'bg-white text-gray-800 rounded-bl-none shadow-sm dark:bg-gray-800 dark:text-gray-100'\n                          : 'bg-green-500 text-white rounded-br-none dark:bg-primary-600'\n                      }`}>\n                        <p className=\"text-sm\">{message.text}</p>\n                        <div className=\"flex items-center justify-between mt-1\">\n                          <p className={`text-xs ${\n                            message.isAdmin ? 'text-gray-500 dark:text-gray-300' : 'text-green-100'\n                          }`}>\n                            {formatTime(message.timestamp)}\n                          </p>\n                          {message.isEdited && (\n                            <span className={`text-xs italic ${message.isAdmin ? 'text-gray-400 dark:text-gray-400' : 'text-green-200'}`}>\n                              modifié\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                  \n                  {/* Typing Indicator */}\n                  {isTyping && (\n                    <div className=\"flex justify-start\">\n                      <div className=\"bg-white text-gray-800 px-4 py-2 rounded-lg rounded-bl-none shadow-sm\">\n                        <div className=\"flex space-x-1\">\n                          <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                          <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\n                          <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                  \n                  <div ref={messagesEndRef} />\n                </div>\n              </div>\n\n              {/* Input */}\n              <div className=\"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900\">\n                <form onSubmit={handleSendMessage} className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"text\"\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    placeholder=\"Tapez votre message...\"\n                    className=\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\"\n                  />\n                  <button\n                    type=\"submit\"\n                    disabled={!newMessage.trim()}\n                    className=\"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <Send className=\"h-4 w-4\" />\n                  </button>\n                </form>\n                \n                {/* Quick Actions */}\n                <div className=\"flex flex-wrap gap-2 mt-3\">\n                  <button\n                    onClick={() => setNewMessage('Bonjour, j\\'ai une question sur un médicament')}\n                    className=\"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200\"\n                  >\n                    Question médicament\n                  </button>\n                  <button\n                    onClick={() => setNewMessage('Quels sont vos horaires d\\'ouverture?')}\n                    className=\"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200\"\n                  >\n                    Horaires\n                  </button>\n                  <button\n                    onClick={() => setNewMessage('Avez-vous ce produit en stock?')}\n                    className=\"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200\"\n                  >\n                    Stock produit\n                  </button>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* Context Menu */}\n      {contextMenu && (\n        <>\n          <div \n            className=\"fixed inset-0 z-40\"\n            onClick={() => setContextMenu(null)}\n          />\n          <MessageContextMenu\n            message={contextMenu.message}\n            position={contextMenu.position}\n            onEdit={handleEditMessage}\n            onDelete={handleDeleteMessage}\n            onClose={() => setContextMenu(null)}\n            canEdit={contextMenu.message.senderId === user._id}\n          />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default ClientChatWidget;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}